<html>
  <head>
    <meta charset="utf-8">
    <title>D3 playground</title>
    <script type="text/javascript" src="components/d3/d3.js">
    </script>
    <script>
            duration = 2000;
            var snake = "d3.select('.text').selectAll('span').data(random(words), function(d){return d ? d.label : d3.select(this).text().trim();}).call(function(s){s.enter().append('span').text(function(d){return d.label+' ';}).transition().duration(duration).style('opacity', 1);}).call(function(s){ s.exit().transition().duration(duration).style('opacity', 0).remove()})";
            var text = 'Each word here is a selectable span, so you can play with it ... for example, with '+snake;
            var words = text.split(' ');
            window.onload = function(){
                words.forEach(function(word){
                    d3.select('.text').append('span').text(word+' ');
                });
            };
            var cities = [
                'Rome',
                'Madrid',
                'Berlin',
                'Paris',
                'Lisbon',
                'London',
                'Oslo',
                'Stockolm',
                'Helsinki',
                'Kiev',
                'Krakov',
                'Athens',
                'Istanbul',
                'Amsterdam',
                'Vienna',
            ];
            function random(labels){
                var r = [];
                if(!labels) {
                    labels = cities;
                }
                labels.forEach(function(label){
                    if(Math.round(Math.random())) {
                        r.push({
                            label: label,
                            value: Math.random()
                        });
                    }
                });
                console.log(JSON.stringify(r));
                return r;
            };
    </script>
    <style type="text/css">
      div.box {
        position: absolute;
        left: 50px;
        background-color: skyblue;
        width: 0;
        height: 18px;
        padding: 4px;
        margin: 1px;
      }
      g.box rect {
        fill: skyblue;
      }
      g.box text {
        fill: black;
      }
    </style>
  </head>
  <body>
    <div class="text"></div>
    <svg height="400" width="400"></svg>
  </body>
</html>

